<!DOCTYPE html>
<html>
<head>
    <title>Mainfo</title>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
    <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
    <script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
    <style>

        body {
            padding: 0;
            margin: 0;
        }
        html, body, #map {
            height: 100%;
            width: 100%;
        }

    </style>
</head>
<body>


<div id="map"></div>

<!-- <script src="../node_modules/simpleheat/simpleheat.js"></script>
<script src="../src/HeatLayer.js"></script> -->

<script src="dist/leaflet-heat.js"></script>

<!--<script src="http://leaflet.github.io/Leaflet.markercluster/example/realworld.10000.js"></script>-->

<script>




$.getJSON("http://raw.githubusercontent.com/mainfo/data/master/data.json", function(data) {
    var heat = [];
    var geojsonheat = L.geoJson(data, {
      
      onEachFeature: function (feature, layer) {
        var lng = feature.geometry.coordinates[0];
        var lat = feature.geometry.coordinates[1];
        var sum = 3;
        lsp = [lat, lng, sum];
        heat.push(lsp)
        console.log(lsp);
        //layer.bindPopup(feature.properties.incident_dateadd);
        //console.log("yeah");
      }
    });
    var OpenStreetMap_HOT = L.tileLayer('http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, Tiles courtesy of <a href="http://hot.openstreetmap.org/" target="_blank">Humanitarian OpenStreetMap Team</a>'
    });

    var labels = L.tileLayer('http://54.77.175.142:8000/TonerVietnam/{z}/{x}/{y}.png');
    var tiles = L.tileLayer('http://{s}.tiles.mapbox.com/v3/{id}/{z}/{x}/{y}.png', {
        attribution: '<a href="https://www.mapbox.com/about/maps/">Terms and Feedback</a>',
        id: 'bobbysud.79c006a5'
    });
    var heatLayer = L.heatLayer(heat,{radius: 20,blur: 30, maxZoom: 10});
    
    var baseMaps = {
        "Satellite": tiles,
        "OSM":OpenStreetMap_HOT
    };

    var overlayMaps = {
        "More Labels": labels,
        "Heatmap": heatLayer
    };

    var map = L.map('map',{maxZoom: 12,layers: [tiles, labels,heatLayer]}).setView([16.68, 107.23], 10);

    L.control.layers(baseMaps, overlayMaps).addTo(map);

    
});



</script>
</body>
</html>
